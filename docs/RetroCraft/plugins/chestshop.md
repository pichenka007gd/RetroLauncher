# ChestShop

Простой и удобный плагин для торговли через сундуки и таблички.

**Пользоваться магазинами очень просто:**
Левый клик по табличке — купить, правый клик — продать.

***Важно:*** таблица и сундук должны быть расположены правильно (табличка — на расстоянии 1 блока от сундука), иначе плагин не сможет связать табличку и сундук.

---

## Как создать магазин для игроков

1. Поставьте сундук на землю.
2. Положите в него нужный тип и количество товара.
3. Установите табличку на расстоянии 1 блока от сундука.
4. Оставьте первую строку пустой — плагин автоматически заполнит её вашим именем.
5. Вторая строка — это количество товара, которое доступно для покупки/продажи.
6. Третья строка — комбинация цен покупки и продажи. Формат:

   * `B <цена>` или `BUY <цена>` — цена покупки (игрок покупает у магазина).
   * `S <цена>` или `SELL <цена>` — цена продажи (игрок продаёт в магазин).
   * Цены можно писать через двоеточие для указания обеих цен: `B 5:S 2` или `B 5:2 S`.

  Примеры цен:

  * `B 5:2 S` — магазин продаёт по 5 и покупает по 2.
  * `B 5` — магазин только продаёт (игрок не может продать этот предмет в магазин).
  * `S free` или `S 0` — магазин принимает предмет бесплатно (пожертвование).
7. В качестве обозначения предмета на табличке можно поставить знак вопроса `?` — плагин автоматически заменит `?` на тот предмет, который лежит в сундуке. Также можно кликнуть по табличке с предметом, чтобы плагин подставил его автоматически.

---

### Формат таблички (пример)

До установки и заполнения сундука:

```
##################
#                #
#       8        #
#      B 5       #
#       ?        #
##################
```

После заполнения сундука и автоматической подстановки (пример результата):

```
##################
#  pichenka007gd #
#       8        #
#      B 5       #
#    diamond     #
##################
```

---

## Примеры цен и поведения

* `B 5:2 S` — магазин продаёт по 5 и покупает по 2.
* `B 5` — магазин только продаёт (игрок не может продать этот предмет в магазин).
* `S free` или `S 0` — магазин принимает предмет бесплатно (пожертвование).

---

## Частые вопросы / советы

* Убедитесь, что табличка стоит **в 1 блоке** от сундука (не дальше).
* Если первая строка пустая, в неё автоматически впишется владелец (ник), который создаёт магазин.
* Если вы хотите, чтобы табличка выглядела красиво, используйте `?` в нижней строке — плагин подставит название предмета из сундука.
* При проблемах проверьте права (permissions).

---

## Команды (общие)

- `/chestshop reload`
  - Перезагрузить конфигурацию ChestShop (для админов).

---

## Админские примечания

* Если магазины не работают как надо — проверьте, не мешают ли protection-плагины (WorldGuard/GriefPrevention) доступ к сундуку или табличке.
* Убедитесь, что у плагина есть доступ на чтение/запись в конфиги и что конфигурация валюты совпадает с другими экономическими плагинами (Essentials, iConomy, Vault и т.д.).
* Резервное копирование (`backup`) папки сервера перед массовыми изменениями — хорошая практика.

---

Если хочешь, я могу подготовить готовую страницу `docs/chestshop.md` с этим содержимым (или добавить отдельный блок с часто используемыми шаблонами табличек и примерами цен).
